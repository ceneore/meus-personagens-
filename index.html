<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Galeria de Personagens</title>
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: 'Poppins', sans-serif;
      padding: 20px;
      margin: 0;
      text-align: center;
    }
    #search-input {
      width: 90%;
      max-width: 400px;
      padding: 10px;
      border-radius: 8px;
      border: none;
      margin: 10px auto 20px;
      font-size: 15px;
      display: block;
    }
    .categories {
      margin-bottom: 20px;
    }
    .categories button {
      padding: 8px 16px;
      margin: 0 5px;
      border: none;
      border-radius: 20px;
      background-color: #444;
      color: #fff;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .categories button.active,
    .categories button:hover {
      background-color: #ff79c6;
      color: #111;
    }
    #toggle-favs {
      padding: 8px 16px;
      margin-bottom: 20px;
      border: none;
      border-radius: 20px;
      background-color: #ffb6f9;
      color: #111;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    #toggle-favs:hover {
      background-color: #ffc4f1;
    }
    .gallery-personagens {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      justify-items: center;
    }
    .personagem {
      background-color: #1c1c1c;
      border-radius: 16px;
      width: 250px;
      min-height: 480px;
      text-align: center;
      padding: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.8);
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .personagem img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 10px;
      transition: transform 0.3s;
    }
    .personagem img:hover {
      transform: scale(1.05);
    }
    .personagem h2 {
      margin: 10px 0 5px;
      color: #f0f0f0;
      font-size: 20px;
    }
    .personagem p {
      font-size: 14px;
      color: #ccc;
      flex-grow: 1;
      margin-bottom: 10px;
    }
    .fav-btn {
      margin-top: 10px;
      padding: 8px 12px;
      background-color: #333;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.2s;
    }
    .fav-btn:hover {
      background-color: #444;
      transform: scale(1.05);
    }
    /* adesivos decorativos */
    .personagem::before {
      content: "☆";
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 24px;
      color: #ff79c6;
      opacity: 0.8;
    }
    .personagem::after {
      content: "";
      position: absolute;
      bottom: -5px;
      right: -5px;
      width: 40px;
      height: 40px;
      background: url('https://i.postimg.cc/Yq0R5zKD/mini-sticker.png') no-repeat center center;
      background-size: contain;
      opacity: 0.25;
      transform: rotate(15deg);
    }
  </style>
</head>
<body>

  <input type="text" id="search-input" placeholder="Pesquisar personagem..." />

  <div class="categories">
    <button class="cat-btn active" data-cat="todos">Todos</button>
    <button class="cat-btn" data-cat="dandadan">Dandadan</button>
    <button class="cat-btn" data-cat="onepiece">One Piece</button>
  </div>

  <button id="toggle-favs">Ver Favoritos</button>

  <div class="gallery-personagens">
    <!-- Exemplo personagem Dandadan -->
    <div class="personagem" data-id="enenra" data-cat="dandadan">
      <img src="https://i.postimg.cc/0ys0XyQZ/012-1-2.jpg" alt="Enenra">
      <h2>Enenra</h2>
      <p>Yōkai da fumaça que se infiltra sob disfarce humano. Pode tornar-se intangível, manipular névoa e atacar de surpresa.</p>
      <button class="fav-btn">♡ Favoritar</button>
    </div>
    <!-- Outro Dandadan -->
    <div class="personagem" data-id="momo-ayase" data-cat="dandadan">
      <img src="https://i.postimg.cc/mgbG9nJ7/004.jpg" alt="Momo Ayase">
      <h2>Momo Ayase</h2>
      <p>Despertou poderes psíquicos após ser abduzida. Manipula auras e exerce telecinese. Papel central no enredo.</p>
      <button class="fav-btn">♡ Favoritar</button>
    </div>
    <!-- Exemplo personagem One Piece -->
    <div class="personagem" data-id="onepiece-luffy" data-cat="onepiece">
      <img src="https://i.postimg.cc/some-url-luffy.jpg" alt="Monkey D. Luffy">
      <h2>Monkey D. Luffy</h2>
      <p>O capitão dos Piratas do Chapéu de Palha, busca o One Piece e sonha em ser o Rei dos Piratas.</p>
      <button class="fav-btn">♡ Favoritar</button>
    </div>
    <!-- Continue adicionando outros personagens -->
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const searchInput = document.getElementById('search-input');
      const toggleFavsBtn = document.getElementById('toggle-favs');
      const catButtons = document.querySelectorAll('.cat-btn');
      const cards = document.querySelectorAll('.personagem');

      let mostrandoFavoritos = false;

      // Inicializa favoritos salvos
      let favs = JSON.parse(localStorage.getItem('favs')) || [];
      cards.forEach(card => {
        const id = card.getAttribute('data-id');
        const btn = card.querySelector('.fav-btn');
        if (favs.includes(id)) {
          btn.textContent = '❤️ Favoritado';
        }
      });

      // Função para atualizar visibilidade dos cards com base em categoria, favoritos e busca
      function atualizarVisibilidade() {
        const termo = searchInput.value.toLowerCase();
        const categoriaSelecionada = document.querySelector('.cat-btn.active').getAttribute('data-cat');

        cards.forEach(card => {
          const nome = card.querySelector('h2').textContent.toLowerCase();
          const cat = card.getAttribute('data-cat');
          const id = card.getAttribute('data-id');
          const estaFavoritado = favs.includes(id);

          let visivel = true;

          // filtro categoria
          if (categoriaSelecionada !== 'todos' && cat !== categoriaSelecionada) {
            visivel = false;
          }

          // filtro favoritos
          if (mostrandoFavoritos && !estaFavoritado) {
            visivel = false;
          }

          // filtro busca
          if (!nome.includes(termo)) {
            visivel = false;
          }

          card.style.display = visivel ? 'block' : 'none';
        });
      }

      // Evento: busca
      searchInput.addEventListener('input', () => {
        atualizarVisibilidade();
      });

      // Evento: toggle favoritos
      toggleFavsBtn.addEventListener('click', () => {
        mostrandoFavoritos = !mostrandoFavoritos;
        toggleFavsBtn.textContent = mostrandoFavoritos ? 'Ver Todos' : 'Ver Favoritos';
        atualizarVisibilidade();
      });

      // Evento: categorias
      catButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          catButtons.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          mostrandoFavoritos = false;
          toggleFavsBtn.textContent = 'Ver Favoritos';
          atualizarVisibilidade();
        });
      });

      // Evento: favoritar
      cards.forEach(card => {
        const id = card.getAttribute('data-id');
        const btn = card.querySelector('.fav-btn');
        btn.addEventListener('click', () => {
          if (favs.includes(id)) {
            favs = favs.filter(f => f !== id);
            btn.textContent = '♡ Favoritar';
          } else {
            favs.push(id);
            btn.textContent = '❤️ Favoritado';
          }
          localStorage.setItem('favs', JSON.stringify(favs));
          atualizarVisibilidade();
        });
      });

      // Visibilidade inicial
      atualizarVisibilidade();
    });
  </script>

</body>
      </html>
